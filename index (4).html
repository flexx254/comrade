<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Supabase Name Test</title>
  <!-- ‚úÖ Load Supabase client library first -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 1rem;
      background-color: #f0f0f0;
    }

    .form-group {
      margin-bottom: 1rem;
    }

    input, button {
      font-size: 1rem;
      padding: 0.5rem;
      width: 100%;
    }

    button {
      background-color: green;
      color: white;
      border: none;
      border-radius: 5px;
      margin-top: 1rem;
    }

    #status {
      margin-top: 1rem;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h2>Test Save to Supabase</h2>

  <div class="form-group">
    <label>First Name:</label>
    <input type="text" id="first-name" placeholder="e.g. John" />
  </div>

  <div class="form-group">
    <label>Middle Name:</label>
    <input type="text" id="middle-name" placeholder="e.g. Alex" />
  </div>

  <div class="form-group">
    <label>Last Name:</label>
    <input type="text" id="last-name" placeholder="e.g. Doe" />
  </div>

  <button onclick="saveName()">Save</button>

  <p id="status"></p>

  <script>
    window.onload = function () {
      // ‚úÖ Supabase credentials
      const supabaseUrl = 'https://wiwtkvrgilolyaudhuxs.supabase.co';
      const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indpd3RrdnJnaWxvbHlhdWRodXhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIxNTg0NDQsImV4cCI6MjA2NzczNDQ0NH0.Uvqmir7uws5RQ0QRVXgk7oRg77qWJYwP6_2LuSwKN-k';
      const supabase = supabase.createClient(supabaseUrl, supabaseKey);

      // ‚úÖ Save function
      window.saveName = async function () {
        alert("‚úÖ Save function is running");

        const first = document.getElementById('first-name').value.trim();
        const middle = document.getElementById('middle-name').value.trim();
        const last = document.getElementById('last-name').value.trim();

        if (!first || !last) {
          alert("‚ö†Ô∏è First and Last Name required.");
          return;
        }

        try {
          const result = await supabase
            .from('names')
            .insert([{ first_name: first, middle_name: middle, last_name: last }]);

          alert("üì¶ Supabase response:\n" + JSON.stringify(result, null, 2));

          if (result.error) {
            document.getElementById('status').textContent = "‚ùå Error: " + result.error.message;
            document.getElementById('status').style.color = 'red';
          } else {
            document.getElementById('status').textContent = "‚úÖ Name saved successfully!";
            document.getElementById('status').style.color = 'green';
            document.getElementById('first-name').value = '';
            document.getElementById('middle-name').value = '';
            document.getElementById('last-name').value = '';
          }
        } catch (e) {
          alert("üí• Try/catch error: " + e.message);
        }
      };
    };
  </script>

</body>
</html>
